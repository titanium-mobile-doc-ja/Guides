# アプリケーションの構造と基本の構成要素

## 目的

このセクションでは、Titaniumアプリの基本的な構成要素であるタブグループとウインドウについて、その核となる機能を見ていきます。

## 解説

Titaniumの「ウインドウ」は、Webで言う「Webページ」と似ています。また、Titaniumの「ビュー」はWebでの「div」に似ています。すでに触れたように、TitaniumのウインドウはWebページと同じように独自のコンテキストで実行されます（必須ではありませんが）。概念的には、ウインドウはWebページのようなトップレベルのコンテナーとなります。

「ビュー」は、スタイリング可能で、一般的なコンテンツのコンテナとなるという2つの点から、Webのdiv要素と似ています。どちらもボタンや他のビューを内包でき、ウインドウやWebページに内包されている必要があります。

「タブグループ」は、Webにはそのまま一致するものがないモバイルコンポーネントです。Webでもタブ的なUIを用いますが、それらは一般的にdiv要素を使って実装されています。タブグループに似たものを挙げるとすれば、ナビゲーションのリンクや、ページをリストアップしたメニューになります。

アプリケーションのUIを構築するために、タブグループ、ウインドウ、及びビューをどのように使用するか見てみましょう。モバイルのユーティリティ系アプリは一般的に、「タブベース」と「ウインドウベース」という2つの基本的なレイアウトのいずれかに則っています。これらを見てみましょう。

![](http://docs.appcelerator.com/titanium/2.1/images/download/attachments/29004894/app_building_blocks.png)

### タブベースのアプリケーション

タブベースのアプリケーションでは、2つ以上のタブがタブグループに含まれます。それぞれのタブにはウインドウが含まれており、各ウインドウには様々なコントロールやグラフィックが含まれます。2つのタブをもったアプリケーションのスケルトンを作る基本的なコードは、以下のようなものです。

```javascript
// タブグループを生成
var tabGroup = Titanium.UI.createTabGroup();
// ウインドウを生成
var win1 = Titanium.UI.createWindow({
    title:'Tab 1',
    backgroundColor:'#fff'
});
// ウインドウを内包したタブを生成
var tab1 = Titanium.UI.createTab({
    icon:'tab1icon.png',
    title:'Tab 1',
    window:win1
});
var win2 = Titanium.UI.createWindow({
    title:'Tab 2',
    backgroundColor:'#fff'
});
var tab2 = Titanium.UI.createTab({
    icon:'tab2icon.png',
    title:'Tab 2',
    window:win2
});
// タブをタブグループに追加
tabGroup.addTab(tab1);
tabGroup.addTab(tab2);
// タブグループを開く
tabGroup.open();
```

上記のコードで、タブのtitleはそのタブの「ハンドル」に表示され、ウインドウのtitleは上部にあるタイトルバーに表示されます。iOSの場合、ウインドウのタイトルバーにナビゲーションボタン（leftNavButtonとrightNavButton）を追加できます。またiOSでは、タブ内で開いたモーダルウインドウはタブグループに重なって画面全体に表示され、非モーダルウインドウはタブ内に表示されます。Androidでは、ウインドウは自動的に画面全体に表示され、「戻る」ボタンを継承します。「戻る」ボタンをタップすれば、ウインドウは閉じられ、タブグループのフォーカスされたウインドウへ戻ります。

#### 推奨するタブの使い方

ユーザーは、各タブごとに関連性の高い機能が簡潔にまとまっていることを期待します。また、各タブがアプリケーションの目的に対し、相互に関連し合うことを期待します。しかしそこに、階層的な関係や並びは期待していません。各タブは互いに対等か兄弟であって、親子ではありません。

iOSでは、タブの「ハンドル」が一定の最小幅を持ちます。表示可能な幅に収まりきれない数のタブを定義した場合、iOSは"More"というラベルの新しいタブに、省略記号を表示します。そのタブをタップすると、表示しきれないタブを一覧する表形式のウインドウが表示されます。

Androidでは、タブの「ハンドル」に最小の固定幅がありません。タブは作成数に合わせて縮小して表示されます。この動作は便利ですが、あまりに多くのタブを使用すると、使いものにならない程小さなタブハンドルとなってしまいます。開発するUIには、常に使いやすさのテストが必要です。

双方のプラットフォームで、すべてのタブが一度に表示され、クリックしやすい状態を保てるので、タブの数は4つ以下をお勧めします。

### ウインドウベースのアプリケーション

ウインドウベースのアプリケーションでは、ビュー、コントロール、及びグラフィックスを含んだ、フルスクリーンのウインドウを使用します。すべてのアプリケーションのフローは、メニュー、UI、及びプラットフォームの提供するナビゲーションコンポーネントから駆動されます。AndroidとiOSの双方で、スタックの一番上にウインドウ自身を出現させる、open()関数が利用できます。逆に、スタックからウインドウを取り除く、close()関数も利用できます。

このようなクロスプラットフォームの関数に加えて、タブグループの助けを借りずにアプリケーションをナビゲートできる、プラットフォーム固有の方法を見てみましょう。

* Android
 * メニューボタンは、ナビゲーションのオプション表示に使用できます。これらはタブに似たセクショニングや、Webブラウザの「戻る」「進む」に似た直接的な指示を可能にします。
 * 「戻る」ボタンは、現在のウインドウを閉じて、前のウインドウに戻ります。
* iOS
 * ほとんどのiOSアプリケーションでナビゲーションの基本となっている、ナビゲーショングループが使用できます。
 * 以下のようなDashboardViewも実装できます。
![](http://docs.appcelerator.com/titanium/2.1/images/download/attachments/29004894/dashboard_view.png)

以上のことから、ウインドウベースのアプリケーションが、モバイルゲームのための一般的な選択肢となることにも、注目すべきです。ほとんどのゲームはシングルスクリーン表示を採用しており、カスタムUIコンポーネントを主に使う場合、OSレベルのナビゲーションはあまり役に立ちません。ゲームはシンプルにフルスクリーンで提供し、ゲームプレイ自体は、ユーザーがアプリと対話できる方法を提示しています。

## 参考文献と参考資料

* UI Guides
* Titanium.UI module

## まとめ

このセクションでは、Titaniumアプリで基本の構成要素となるタブグループとウインドウの使い方を見ました。以降のセクションでは、TitaniumモデルのUIでビューとコンポーネントをレイアウトする方法について、詳しく見ていきます。
